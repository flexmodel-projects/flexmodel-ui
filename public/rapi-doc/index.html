<!doctype html> <!-- Important: must specify -->
<html>
<head>
  <meta charset="utf-8"> <!-- Important: rapi-doc uses utf8 characters -->
  <script type="module" src="./rapidoc-min.js"></script>
  <script>
    // 从 URL 参数中获取主题设置
    function getThemeFromUrl() {
      const urlParams = new URLSearchParams(window.location.search);
      const theme = urlParams.get('theme');
      return theme || 'dark'; // 默认使用 dark 主题
    }

    // 获取 OpenAPI JSON 的 URL
    function getOpenApiUrl() {
      const tenantId = localStorage.getItem('tenantId');
      if (tenantId) {
        return `/api/f/docs/${tenantId}/openapi.json`;
      }
      return '/api/f/docs/openapi.json';
    }

    // 页面加载完成后设置主题和 spec-url
    document.addEventListener('DOMContentLoaded', function() {
      const theme = getThemeFromUrl();
      const rapiDoc = document.querySelector('rapi-doc');
      if (rapiDoc) {
        rapiDoc.setAttribute('theme', theme);
        rapiDoc.setAttribute('spec-url', getOpenApiUrl());
      }
    });
  </script>
</head>
<body>
<rapi-doc
  show-header = 'false'
  show-info = 'false'
  allow-server-selection = 'false'
  allow-api-list-style-selection ='false'
  primary-color = "#1677ff"
  show-method-in-nav-bar="as-colored-text"
> </rapi-doc>
</body>
</html>
